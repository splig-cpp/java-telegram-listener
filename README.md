# Telegram Listener

Этот проект поднимает простого Telegram Long Polling бота, который выводит в консоль содержимое
каждого полученного update. Это удобно, когда нужно быстро проверить, какие события Telegram API
отправляет вашему боту ("webhook" payload'ы) без настройки собственного сервера.

## Возможности
- Поддержка всех основных типов Update (сообщения, инлайн-запросы, опросы, реакции, chat boost и т.д.)
- Подробный человекочитаемый вывод для каждого payload'а
- Простая конфигурация через переменные окружения / системные свойства
- JUnit-тесты, которые покрывают форматирование выходных данных

## Требования
- JDK 17+
- Maven 3.9+
- Существующий Telegram бот и токен (`TELEGRAM_BOT_TOKEN`)
- Username бота (`TELEGRAM_BOT_USERNAME`)

## Быстрый старт
```bash
# собрать и прогнать тесты
mvn verify

# запустить бота (env vars предпочтительнее)
TELEGRAM_BOT_TOKEN=123:abc TELEGRAM_BOT_USERNAME=my_listener_bot mvn exec:java
```

После запуска, бот зарегистрируется через Long Polling и будет печатать каждое событие в stdout.

## Конфигурация
| Ключ | Где задаётся | Описание |
| --- | --- | --- |
| `TELEGRAM_BOT_TOKEN` | переменная окружения или `-DTELEGRAM_BOT_TOKEN` | токен, который выдаёт @BotFather |
| `TELEGRAM_BOT_USERNAME` | переменная окружения или `-DTELEGRAM_BOT_USERNAME` | username бота (без @) |

Если переменная/свойство не задано, приложение упадёт с `IllegalStateException` и сообщит, какое
значение отсутствует.

## Структура проекта
- `BotLauncher` — точка входа, которая читает конфиг и регистрирует бота
- `TelegramTriggerBot` — реализация `TelegramLongPollingBot`
- `UpdatePrinter` — формирует диагностическую строку, где явно указано, какие части Update у вас есть
- `UpdatePrinterTest` — гарантирует, что новые типы Update не будут пропущены

## Как читать вывод
Каждый блок начинается с `=== Update #<id> ===` и заканчивается `=============================`.
Внутри находятся секции вида `[MESSAGE]`, `[INLINE_QUERY]` и т.п.; если секции нет, значит Telegram не
прислал соответствующий payload. Это удобно для отладки inline-кнопок, оплат, реакций, chat-join
events и прочих сложных сценариев.

## Возможные доработки
- Поддержка более компактных форматов вывода (JSON/NDJSON)
- Опциональная отправка логов в файл или централизованный логгер
- Dockerfile / Helm chart для быстрого развёртывания

PR'ы и задачи приветствуются.
